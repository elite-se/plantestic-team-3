<?xml version="1.0" encoding="UTF-8"?>
<puml:SequenceDiagram xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:puml="http://www.eclipse.plantuml/Puml">
  <umlElements xsi:type="puml:Participant" name="VM" longname="Voicemanager"/>
  <umlElements xsi:type="puml:Participant" name="XCS"/>
  <umlElements xsi:type="puml:Participant" name="DataService"/>
  <umlElements xsi:type="puml:Participant" name="CRS"/>
  <umlElements xsi:type="puml:Participant" name="EventNotifier"/>
  <umlElements xsi:type="puml:Participant" name="ELOS"/>
  <umlElements xsi:type="puml:Participant" name="CCC"/>
  <umlElements xsi:type="puml:Activate" activate="#//@umlElements.1" deactivate="#//@umlElements.0">
    <umlElements xsi:type="puml:UseLeft" userOne="#//@umlElements.1" associationArrow="->"
        userTwo="#//@umlElements.2">
      <content xsi:type="puml:Request" method="GET" url="/vehicle/internal/${vin}"/>
    </umlElements>
    <umlElements xsi:type="puml:Activate" activate="#//@umlElements.2" deactivate="#//@umlElements.2">
      <umlElements xsi:type="puml:UseLeft" userOne="#//@umlElements.2" associationArrow="-->"
          userTwo="#//@umlElements.1">
        <content xsi:type="puml:Response">
          <code>200</code>
          <responseParam name="homeCountry" value="/homeCountry"/>
          <responseParam name="positionCountry" value="/positionCountry"/>
          <responseParam name="brand" value="/brand"/>
        </content>
      </umlElements>
    </umlElements>
    <umlElements xsi:type="puml:UseLeft" userOne="#//@umlElements.1" associationArrow="->"
        userTwo="#//@umlElements.3">
      <content xsi:type="puml:Request" method="POST" url="routingTargets/find">
        <requestParam name="eventId" value="${eventId}"/>
        <requestParam name="serviceType" value="${serviceType}"/>
        <requestParam name="vin" value="${vin}"/>
        <requestParam name="homeCountry" value="${homeCountry}"/>
        <requestParam name="positionCountry" value="${positionCountry}"/>
        <requestParam name="brand" value="${brand}"/>
      </content>
    </umlElements>
    <umlElements xsi:type="puml:Activate" activate="#//@umlElements.3" deactivate="#//@umlElements.3">
      <umlElements xsi:type="puml:UseLeft" userOne="#//@umlElements.3" associationArrow="-->"
          userTwo="#//@umlElements.1">
        <content xsi:type="puml:Response">
          <code>200</code>
          <responseParam name="voiceTargets" value="/voiceTargets"/>
        </content>
      </umlElements>
    </umlElements>
    <umlElements xsi:type="puml:Alternative" text="${xcsServiceType} == 'ACall'">
      <umlElements xsi:type="puml:UseLeft" userOne="#//@umlElements.1" associationArrow="->"
          userTwo="#//@umlElements.4">
        <content xsi:type="puml:Request" method="PUT" url="xcs/notify/${eventId}">
          <requestParam name="homeCountry" value="${homeCountry}"/>
          <requestParam name="positionCountry" value="${positionCountry}"/>
          <requestParam name="brand" value="${brand}"/>
        </content>
      </umlElements>
      <umlElements xsi:type="puml:Activate" activate="#//@umlElements.4" deactivate="#//@umlElements.4">
        <umlElements xsi:type="puml:UseLeft" userOne="#//@umlElements.4" associationArrow="-->"
            userTwo="#//@umlElements.1">
          <content xsi:type="puml:Response">
            <code>200</code>
          </content>
        </umlElements>
      </umlElements>
    </umlElements>
    <umlElements xsi:type="puml:Alternative" text="${xcsServiceType} == 'BCall'">
      <umlElements xsi:type="puml:UseLeft" userOne="#//@umlElements.1" associationArrow="->"
          userTwo="#//@umlElements.5">
        <content xsi:type="puml:Request" method="PUT" url="xcs/notify/${eventId}">
          <requestParam name="homeCountry" value="${homeCountry}"/>
          <requestParam name="positionCountry" value="${positionCountry}"/>
          <requestParam name="brand" value="${brand}"/>
        </content>
      </umlElements>
      <umlElements xsi:type="puml:Activate" activate="#//@umlElements.5" deactivate="#//@umlElements.5">
        <umlElements xsi:type="puml:UseLeft" userOne="#//@umlElements.5" associationArrow="-->"
            userTwo="#//@umlElements.1">
          <content xsi:type="puml:Response">
            <code>200</code>
          </content>
        </umlElements>
      </umlElements>
    </umlElements>
    <umlElements xsi:type="puml:UseLeft" userOne="#//@umlElements.1" associationArrow="->"
        userTwo="#//@umlElements.6">
      <content xsi:type="puml:Request" method="POST" url="xcs/eventReceived">
        <requestParam name="eventId" value="${eventId}"/>
        <requestParam name="serviceType" value="${serviceType}"/>
        <requestParam name="homeCountry" value="${homeCountry}"/>
        <requestParam name="positionCountry" value="${positionCountry}"/>
        <requestParam name="brand" value="${brand}"/>
      </content>
    </umlElements>
    <umlElements xsi:type="puml:Activate" activate="#//@umlElements.6" deactivate="#//@umlElements.6">
      <umlElements xsi:type="puml:UseLeft" userOne="#//@umlElements.6" associationArrow="-->"
          userTwo="#//@umlElements.1">
        <content xsi:type="puml:Response">
          <code>200</code>
        </content>
      </umlElements>
    </umlElements>
    <umlElements xsi:type="puml:UseLeft" userOne="#//@umlElements.1" associationArrow="->"
        userTwo="#//@umlElements.0">
      <content xsi:type="puml:Request" method="POST" url="/setupCall">
        <requestParam name="eventId" value="${eventId}"/>
        <requestParam name="vin" value="${vin}"/>
        <requestParam name="voiceTargets" value="${voiceTargets}"/>
      </content>
    </umlElements>
    <umlElements xsi:type="puml:Activate" activate="#//@umlElements.0" deactivate="#//@umlElements.1">
      <umlElements xsi:type="puml:UseLeft" userOne="#//@umlElements.0" associationArrow="-->"
          userTwo="#//@umlElements.1">
        <content xsi:type="puml:Response">
          <code>200</code>
        </content>
      </umlElements>
    </umlElements>
  </umlElements>
</puml:SequenceDiagram>
